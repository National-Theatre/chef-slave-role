#!/bin/bash
### BEGIN INIT INFO
# Provides:       selenium
# Required-Start: $network $syslog
# Required-Stop:  $network $syslog
# Default-Start:  3 5
# Default-Stop:   0 1 2 6
# Short-Description: Selenium Server
# Description:    Selenium UI testing Server
### END INIT INFO
. /etc/rc.d/init.d/functions

java=/usr/bin/java
selenium=<%= node['slave-ci']['selenium_file'] %>
pidfile=/var/run/selenium.pid
RETVAL=0

case "$1" in
        start)
	  echo -n $"Starting Selenium Server "
	  ${java} -jar /tmp/${selenium} &
	  echo $!>${pidfile}
        ;;
        stop)
	  echo -n $"Stopping Selenium Server "
	  killproc -p ${pidfile} ${java}
	  RETVAL=$?
	  echo
	  [ $RETVAL = 0 ] && rm -f ${pidfile}
	;;
	status)
	  status -p ${pidfile} ${java}
	  RETVAL=$?
	;;
	restart)
	  echo -n "Restarting Selenium Server daemon "
	  $0 stop
	  $0 start
	;;
esac
exit 0